#include <iostream>
#include <fstream>
#include <sstream>
#include <string>
#include <vector>
#include <cctype>

using namespace std;


bool isKeyword(const string &word)
{
    const vector<string> keywords = {"int", "return"};
    for (const string &keyword : keywords)
    {
        if (word == keyword)
            return true;
    }
    return false;
}


bool isConstant(const string &word)
{
    for (char c : word)
    {
        if (!isdigit(c))
            return false;
    }
    return !word.empty();
}


bool isIdentifier(const string &word)
{
    if (isKeyword(word) || isConstant(word))
        return false;

    if (!isalpha(word[0]) && word[0] != '_')
        return false;

    for (int i = 1; i < word.size(); i++)
    {
        if (!isalnum(word[i]) && word[i] != '_')
            return false;
    }
    return true;
}


bool isOperator(const string &word)
{
    const vector<string> operators = {"+", "-", "*", "/", "%", "=", "++", "--"};
    for (const string &op : operators)
    {
        if (word == op)
            return true;
    }
    return false;
}


bool isPunctuation(const string &word)
{
    const vector<string> punctuation = {";", "(", ")", "{", "}", ","};
    for (const string &p : punctuation)
    {
        if (word == p)
            return true;
    }
    return false;
}


void tokenizeAndClassify(const string &line)
{
    string token;
    stringstream ss(line);

    while (ss >> token)
    {
        cout << "Token: \"" << token << "\" -> ";

        if (isKeyword(token))
            cout << "Keyword" << endl;
        else if (isConstant(token))
            cout << "Constant" << endl;
        else if (isIdentifier(token))
            cout << "Identifier" << endl;
        else if (isOperator(token))
            cout << "Operator" << endl;
        else if (isPunctuation(token))
            cout << "Punctuation" << endl;
        else
            cout << "Unknown" << endl;
    }
}

int main()
{
    string filename;

    cout << "Please enter the name of the code file (e.g., code.txt): ";
    cin >> filename;

    ifstream file(filename);

    if (!file)
    {
        cout << "File \"" << filename << "\" not found or unable to open!" << endl;
        return 0;
    }

    string line;

    while (getline(file, line))
    {
        cout << "\nReading line: \"" << line << "\"" << endl;
        tokenizeAndClassify(line);
    }

    file.close();
    return 0;
}
